"use strict";(self.webpackChunkyaad=self.webpackChunkyaad||[]).push([[716],{716:function(e,t,a){a.r(t);var n=a(4165),r=a(8683),s=a(5861),i=a(2791),o=a(8329),l=a(8188),c=a(7584),u=a(1273),d=a(1449),p=a(6931),m=(a(4363),a(6505),a(4880)),x=a(4684),v=a(184);t.default=function(e){var t=(0,i.useContext)(o.s),a=t.state,f=t.setState,g=(0,i.useContext)(l.G),h=(g.msgStacks,g.setMsgStacks),b=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var a,s,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,x.QP)(),a=0,0!==t.target.files.length){e.next=5;break}return h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{messages:["No file selected!"]})})),e.abrupt("return",(0,x.Zk)());case 5:(0,d.U)(t.target.files[0],(function(e){console.log("file signature: ".concat(e))})),s=t.target.files[0],(i=new FileReader).addEventListener("load",(function(){if(1===++a)return f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{data:(0,r.Z)((0,r.Z)({},e.data),{},{path:i.result})})})),(0,x.Zk)()})),i.readAsDataURL(s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target,""!==(s=r.value)){e.next=4;break}return e.abrupt("return");case 4:e.t0=t.target.getAttribute("name"),e.next="name"===e.t0?7:"collection"===e.t0?10:"price"===e.t0?13:"royalties"===e.t0?16:"desc"===e.t0?19:22;break;case 7:return a.data.name=(0,p.SA)(s,0,50)&&(0,p.sg)(s,[".","_"," "])?s:a.data.name,r.value=a.data.name,e.abrupt("break",23);case 10:return a.data.collection=(0,p.SA)(s,0,50)&&(0,p.sg)(s,[".","_"," "])?s:a.data.collection,r.value=a.data.collection,e.abrupt("break",23);case 13:return a.data.price=(0,p.kE)(s)?s:a.data.price,r.value=a.data.price,e.abrupt("break",23);case 16:return a.data.royalties=(0,p.kE)(s)?s:a.data.royalties,r.value=a.data.royalties,e.abrupt("break",23);case 19:return a.data.description=(0,p.SA)(s,0,200)?s:a.data.description,r.value=a.data.description,e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function k(e){var t,i,o,l,d,g,k,F,Z,S,w,C,N,j=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var s,i,o,l,d,m,v,g,b,y,k,F,Z,S,w,C,N,j,D,E,T;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,x.QP)(t),t.preventDefault(),["89504e47".toLowerCase(),"FFD8FFE0".toLowerCase(),"FFD8FFE1".toLowerCase(),"FFD8FFE2".toLowerCase(),"FFD8FFE8".toLowerCase(),"FFD8FFDB".toLowerCase(),"FFD8FFEE".toLowerCase(),"25504446".toLowerCase()],m=a.data.path.length,v="",g=0;case 6:if(!(g<m)){e.next=16;break}if(";"===(b=a.data.path[g])){e.next=12;break}v+=b,e.next=13;break;case 12:return e.abrupt("break",16);case 13:g++,e.next=6;break;case 16:if(console.log("pre64String:: ".concat(v)),y=[],null!==(s=a.data)&&void 0!==s&&s.path||y.push("Upload an NFT file!"),null!==(i=a.data)&&void 0!==i&&i.name&&(0,p.SA)(null===(o=a.data)||void 0===o?void 0:o.name,3,50)&&(0,p.sg)(null===(l=a.data)||void 0===l?void 0:l.name,[".","_",[" "]])||y.push("Name must be at least 3 characters long & only letters numbers, spaces, periods, and undescores allowed!"),null!==(d=a.data)&&void 0!==d&&d.description&&(""!==(null===(k=a.data)||void 0===k?void 0:k.description)&&(0,p.SA)(null===(F=a.data)||void 0===F?void 0:F.description,20,200)||y.push("Description must be at least 20 characters long!")),a.data.collection&&((0,p.SA)(null===(Z=a.data)||void 0===Z?void 0:Z.collection,4,50)||y.push("Collection name must be at least 4 characters long!")),!(y.length>0)){e.next=25;break}return h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{messages:y,substate:a.currsubState})})),e.abrupt("return",(0,x.Zk)(t));case 25:return e.next=27,(0,u.SY)();case 27:return S=e.sent,console.log(S),w={pinataMetadata:{name:"".concat(a.data.name),keyvalues:{description:"nft generated by Yaad labs.",name:"".concat(a.data.name)}},pinataOptions:{cidVersion:0}},e.next=32,(0,c.Jr)(a.data.path);case 32:return C=e.sent,N=S+"__"+Date.now()+".",(j=new FormData).append("img",C,N),j.append("the_options",JSON.stringify(w)),e.next=39,fetch(a.baseServerUri+"pinnit",{method:"POST"});case 39:return e.sent,(D=new FormData).append("data",JSON.stringify(a.data)),e.next=44,fetch(a.baseServerUri+"createone",{method:"POST",body:D}).then((function(e){return e.json()})).then((function(e){return e}));case 44:if(!(E=e.sent).error){e.next=51;break}if("duplicate"!==E.error.message){e.next=49;break}return(0,x.Zk)(),e.abrupt("return",h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{formdata:[{id:"createSingleBoxPreview",value:"",msg:"This NFT already exists, please select an original design."}],substate:a.currsubState})})));case 49:(0,x.Zk)(),f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{currsubState:"SingleNFTDetailsForm"})}));case 51:if(!E.results){e.next=64;break}return e.next=54,(0,u.VV)(E.results.IpfsHash).finally((function(e){return e}));case 54:if("ACTION_REJECTED"!==(T=e.sent).code){e.next=59;break}return(0,x.Zk)(),t.target.classList.remove("inactive"),e.abrupt("return",h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{formdata:[{id:"createSingleBoxPreview",value:"",msg:"Transaction rejected!"}],substate:a.currsubState})})));case 59:if(console.log("minted----- ".concat(JSON.stringify(T))),!T.hash){e.next=62;break}return e.abrupt("return",f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{currsubState:"NFTminted"})})));case 62:t.target.classList.remove("inactive"),(0,x.Zk)();case 64:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{className:"popupBoxEleDetailsLabel",id:"createSingleBoxPreview",htmlFor:"createSingleAssetUpld",onClick:function(){document.querySelector("#single_asset").click()},children:(0,v.jsxs)("div",{className:"popupBoxEleDetails",style:{padding:null!==(t=a.data)&&void 0!==t&&t.path?"0px":"30px",boxSizing:"border-box"},children:[" ",(0,v.jsx)("img",{src:null!==(i=a.data)&&void 0!==i&&i.path?null===(o=a.data)||void 0===o?void 0:o.path:"uploadimg.svg",style:{objectFit:"cover",height:"100%",width:"100%"},alt:""})," "]})}),(0,v.jsx)("input",{type:"file",id:"single_asset",name:"single_asset",style:{opacity:100,zIndex:1},onChange:b,hidden:!0}),(0,v.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(l=a.data)&&void 0!==l&&l.name?null===(d=a.data)||void 0===d?void 0:d.name:"Name",type:"text",name:"name",id:"singleNFTName",onChange:y,onClick:function(e){return e.target.value=a.data.name?a.data.name:""},style:{opacity:100,zIndex:1}}),(0,v.jsx)(m.Xj,{data:{typeId:"singleNFTDesc",typeClass:"popupBoxTextAreaEle",name:"desc",placeholder:null!==(g=a.data)&&void 0!==g&&g.description?null===(k=a.data)||void 0===k?void 0:k.description:"Description",type:"textarea",onChange:y}}),(0,v.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(F=a.data)&&void 0!==F&&F.collection?null===(Z=a.data)||void 0===Z?void 0:Z.collection:"Collection",type:"text",name:"collection",id:"singleNFTColl",onChange:y,style:{opacity:100,zIndex:1}}),(0,v.jsxs)("div",{style:{flexDirection:"row",maxWidth:"600px",width:"100%",margin:"0px auto"},children:[(0,v.jsx)("input",{className:"popupBoxSmallTextAreaLeftEle",placeholder:null!==(S=a.data)&&void 0!==S&&S.price?null===(w=a.data)||void 0===w?void 0:w.price:"Price",type:"number",name:"price",id:"singleNFTPrice",onChange:y,style:{opacity:100,zIndex:1}}),(0,v.jsx)("input",{className:"popupBoxSmallTextAreaRightEle",placeholder:null!==(C=a.data)&&void 0!==C&&C.royalties?null===(N=a.data)||void 0===N?void 0:N.royalties:"Royalties: max 50%",type:"number",name:"royalties",id:"singleNFTRoyalty",onChange:y,style:{opacity:100,zIndex:1}})]}),(0,v.jsx)(m.BZ,{data:{class:"popupBoxEle",id:"createBox",value:"create",func:j}})]})}return(0,v.jsx)("div",{className:"popupdark",children:(0,v.jsxs)("div",{className:"popupBox",children:[(0,v.jsx)("button",{className:"closeBoxWhite",onClick:function(){return f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{state:"home",data:{coll_name:null,coll_symbol:null,layers:[]},currsubState:null})}))},children:"X"}),(0,v.jsx)(k,{})]})})}}}]);
//# sourceMappingURL=716.e5279481.chunk.js.map