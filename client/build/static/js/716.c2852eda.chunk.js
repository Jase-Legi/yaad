"use strict";(self.webpackChunkyaad=self.webpackChunkyaad||[]).push([[716],{716:function(e,t,a){a.r(t);var n=a(4165),r=a(885),i=a(8683),s=a(5861),o=a(2791),l=a(8329),c=a(8188),u=a(7584),d=a(1273),p=a(1449),m=a(6931),v=(a(4363),a(6505),a(4880)),g=a(4684),x=a(184);t.default=function(e){var t=(0,o.useContext)(l.s),a=t.state,f=t.setState,b=(0,o.useContext)(c.G),h=(b.msgStacks,b.setMsgStacks),y=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,g.QP)(t),0!==t.target.files.length){e.next=4;break}return h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{messages:["No file selected!"]})})),e.abrupt("return",(0,g.Zk)());case 4:a=t.target.files[0],(0,p.m)(a,(function(e){var a=(0,r.Z)(e,2),n=a[0],s=a[1];return s.toLowerCase().match(/(png|jpg|jpeg|gif|mp3|mp4|svg|mov|webp|webm|mpg|avi|ogg|wmv|bmp|tiff)$/)?(console.log("file extension: ".concat(s)),f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{data:(0,i.Z)((0,i.Z)({},e.data),{},{path:n,ext:s})})})),(0,g.Zk)(t)):(n=null,h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{messages:["File type not allowed!, \nSupported file types: png, jpg, jpeg, ico, gif, mp3, mp4, svg, mov, webp, webm, mpg, avi, ogg, wmv, bmp, tiff."]})})),(0,g.Zk)(t))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target,""!==(i=r.value)){e.next=4;break}return e.abrupt("return");case 4:e.t0=t.target.getAttribute("name"),e.next="name"===e.t0?7:"collection"===e.t0?10:"price"===e.t0?13:"royalties"===e.t0?16:"desc"===e.t0?19:22;break;case 7:return a.data.name=(0,m.SA)(i,0,50)&&(0,m.sg)(i,[".","_"," "])?i:a.data.name,r.value=a.data.name,e.abrupt("break",23);case 10:return a.data.collection=(0,m.SA)(i,0,50)&&(0,m.sg)(i,[".","_"," "])?i:a.data.collection,r.value=a.data.collection,e.abrupt("break",23);case 13:return a.data.price=(0,m.kE)(i)?i:a.data.price,r.value=a.data.price,e.abrupt("break",23);case 16:return a.data.royalties=(0,m.kE)(i)?i:a.data.royalties,r.value=a.data.royalties,e.abrupt("break",23);case 19:return a.data.description=(0,m.SA)(i,0,200)?i:a.data.description,r.value=a.data.description,e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,o,l,c,p,v,x,b,y,k,Z,S,w,N,j,C;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,g.QP)(t),t.preventDefault(),p=[],null!==(r=a.data)&&void 0!==r&&r.path||p.push("Upload an NFT file!"),null!==(s=a.data)&&void 0!==s&&s.name&&(0,m.SA)(null===(o=a.data)||void 0===o?void 0:o.name,3,50)&&(0,m.sg)(null===(l=a.data)||void 0===l?void 0:l.name,[".","_",[" "]])||p.push("Name must be at least 3 characters long & only letters numbers, spaces, periods, and undescores allowed!"),null!==(c=a.data)&&void 0!==c&&c.description&&(""!==(null===(v=a.data)||void 0===v?void 0:v.description)&&(0,m.SA)(null===(x=a.data)||void 0===x?void 0:x.description,20,200)||p.push("Description must be at least 20 characters long!")),a.data.collection&&((0,m.SA)(null===(b=a.data)||void 0===b?void 0:b.collection,4,50)||p.push("Collection name must be at least 4 characters long!")),!(p.length>0)){e.next=10;break}return h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{messages:p,substate:a.currsubState})})),e.abrupt("return",(0,g.Zk)(t));case 10:return e.next=12,(0,d.SY)();case 12:return y=e.sent,console.log(y),k={pinataMetadata:{name:"".concat(a.data.name),keyvalues:{description:"nft generated by Yaad labs.",name:"".concat(a.data.name)}},pinataOptions:{cidVersion:0}},e.next=17,(0,u.Jr)(a.data.path);case 17:return Z=e.sent,S=y+"__"+Date.now()+".",(w=new FormData).append("img",Z,S),w.append("the_options",JSON.stringify(k)),e.next=24,fetch(a.baseServerUri+"pinnit",{method:"POST"});case 24:return e.sent,(N=new FormData).append("data",JSON.stringify(a.data)),e.next=29,fetch(a.baseServerUri+"createone",{method:"POST",body:N}).then((function(e){return e.json()})).then((function(e){return e}));case 29:if(!(j=e.sent).error){e.next=36;break}if("duplicate"!==j.error.message){e.next=34;break}return(0,g.Zk)(),e.abrupt("return",h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{formdata:[{id:"createSingleBoxPreview",value:"",msg:"This NFT already exists, please select an original design."}],substate:a.currsubState})})));case 34:(0,g.Zk)(),f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currsubState:"SingleNFTDetailsForm"})}));case 36:if(!j.results){e.next=49;break}return e.next=39,(0,d.VV)(j.results.IpfsHash).finally((function(e){return e}));case 39:if("ACTION_REJECTED"!==(C=e.sent).code){e.next=44;break}return(0,g.Zk)(),t.target.classList.remove("inactive"),e.abrupt("return",h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{formdata:[{id:"createSingleBoxPreview",value:"",msg:"Transaction rejected!"}],substate:a.currsubState})})));case 44:if(console.log("minted----- ".concat(JSON.stringify(C))),!C.hash){e.next=47;break}return e.abrupt("return",f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currsubState:"NFTminted"})})));case 47:t.target.classList.remove("inactive"),(0,g.Zk)();case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function S(e){var t,n,r,i,s,o,l,c,u,d,p,m,g;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("label",{className:"popupBoxEleDetailsLabel",id:"createSingleBoxPreview",htmlFor:"createSingleAssetUpld",onClick:function(){document.querySelector("#single_asset").click()},children:(0,x.jsxs)("div",{className:"popupBoxEleDetails",style:{padding:null!==(t=a.data)&&void 0!==t&&t.path?"0px":"30px",boxSizing:"border-box"},children:[" ",(0,x.jsx)("img",{src:null!==(n=a.data)&&void 0!==n&&n.path?null===(r=a.data)||void 0===r?void 0:r.path:"uploadimg.svg",style:{objectFit:"cover",height:"100%",width:"100%"},alt:""})," "]})}),(0,x.jsx)("input",{type:"file",id:"single_asset",name:"single_asset",style:{opacity:100,zIndex:1},onChange:y,hidden:!0}),(0,x.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(i=a.data)&&void 0!==i&&i.name?null===(s=a.data)||void 0===s?void 0:s.name:"Name",type:"text",name:"name",id:"singleNFTName",onChange:k,onClick:function(e){return e.target.value=a.data.name?a.data.name:""},style:{opacity:100,zIndex:1}}),(0,x.jsx)(v.Xj,{data:{typeId:"singleNFTDesc",typeClass:"popupBoxTextAreaEle",name:"desc",placeholder:null!==(o=a.data)&&void 0!==o&&o.description?null===(l=a.data)||void 0===l?void 0:l.description:"Description",type:"textarea",onChange:k}}),(0,x.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(c=a.data)&&void 0!==c&&c.collection?null===(u=a.data)||void 0===u?void 0:u.collection:"Collection",type:"text",name:"collection",id:"singleNFTColl",onChange:k,style:{opacity:100,zIndex:1}}),(0,x.jsxs)("div",{style:{flexDirection:"row",maxWidth:"600px",width:"100%",margin:"0px auto"},children:[(0,x.jsx)("input",{className:"popupBoxSmallTextAreaLeftEle",placeholder:null!==(d=a.data)&&void 0!==d&&d.price?null===(p=a.data)||void 0===p?void 0:p.price:"Price",type:"number",name:"price",id:"singleNFTPrice",onChange:k,style:{opacity:100,zIndex:1}}),(0,x.jsx)("input",{className:"popupBoxSmallTextAreaRightEle",placeholder:null!==(m=a.data)&&void 0!==m&&m.royalties?null===(g=a.data)||void 0===g?void 0:g.royalties:"Royalties: max 50%",type:"number",name:"royalties",id:"singleNFTRoyalty",onChange:k,style:{opacity:100,zIndex:1}})]}),(0,x.jsx)(v.BZ,{data:{class:"popupBoxEle",id:"createBox",value:"create",func:Z}})]})}return(0,x.jsx)("div",{className:"popupdark",children:(0,x.jsxs)("div",{className:"popupBox",children:[(0,x.jsx)("button",{className:"closeBoxWhite",onClick:function(){return f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{state:"home",data:{coll_name:null,coll_symbol:null,layers:[]},currsubState:null})}))},children:"X"}),(0,x.jsx)(S,{})]})})}}}]);
//# sourceMappingURL=716.c2852eda.chunk.js.map