"use strict";(self.webpackChunkyaad=self.webpackChunkyaad||[]).push([[716],{716:function(e,t,a){a.r(t);var n=a(4165),r=a(8683),i=a(5861),s=a(2791),l=a(8329),o=a(8188),u=a(1273),c=a(6931),d=(a(4363),a(6505),a(4880)),p=a(4684),x=a(184);t.default=function(e){var t=(0,s.useContext)(l.s),a=t.state,m=t.setState,v=(0,s.useContext)(o.G),f=(v.msgStacks,v.setMsgStacks),g=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var a,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,p.QP)(),a=0,0!==t.target.files.length){e.next=5;break}return f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{messages:["No file selected!"]})})),e.abrupt("return",(0,p.Zk)());case 5:i=t.target.files[0],(s=new FileReader).addEventListener("load",(function(){if(1===++a)return m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{data:(0,r.Z)((0,r.Z)({},e.data),{},{path:s.result})})})),(0,p.Zk)()})),s.readAsDataURL(i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target,""!==(i=r.value)){e.next=4;break}return e.abrupt("return");case 4:e.t0=t.target.getAttribute("name"),e.next="name"===e.t0?7:"collection"===e.t0?10:"price"===e.t0?13:"royalties"===e.t0?16:"desc"===e.t0?19:22;break;case 7:return a.data.name=(0,c.SA)(i,0,50)&&(0,c.sg)(i,[".","_"," "])?i:a.data.name,r.value=a.data.name,e.abrupt("break",23);case 10:return a.data.collection=(0,c.SA)(i,0,50)&&(0,c.sg)(i,[".","_"," "])?i:a.data.collection,r.value=a.data.collection,e.abrupt("break",23);case 13:return a.data.price=(0,c.kE)(i)?i:a.data.price,r.value=a.data.price,e.abrupt("break",23);case 16:return a.data.royalties=(0,c.kE)(i)?i:a.data.royalties,r.value=a.data.royalties,e.abrupt("break",23);case 19:return a.data.description=(0,c.SA)(i,0,200)?i:a.data.description,r.value=a.data.description,e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function h(e){var t,s,l,o,v,h,y,k,Z,S,N,j,C,T=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var i,s,l,o,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,p.QP)(t),t.preventDefault(),(0,c.SA)(null===(i=a.data)||void 0===i?void 0:i.name,3,50)&&(0,c.sg)(null===(s=a.data)||void 0===s?void 0:s.name)&&!(0,c.SA)(a.data.description,0,200)&&!(0,c.SA)(a.data.collection,0,50)){e.next=5;break}return f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{messages:["Name must be at least 3 characters long!"],substate:a.currsubState})})),e.abrupt("return",(0,p.Zk)(t));case 5:return(l=new FormData).append("data",JSON.stringify(a.data)),e.next=9,fetch(a.baseServerUri+"createone",{method:"POST",body:l}).then((function(e){return e.json()})).then((function(e){return e}));case 9:if(!(o=e.sent).error){e.next=16;break}if("duplicate"!==o.error.message){e.next=14;break}return(0,p.Zk)(),e.abrupt("return",f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{formdata:[{id:"createSingleBoxPreview",value:"",msg:"This NFT already exists, please select an original design."}],substate:a.currsubState})})));case 14:(0,p.Zk)(),m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{currsubState:"SingleNFTDetailsForm"})}));case 16:if(!o.results){e.next=29;break}return e.next=19,(0,u.VV)(o.results.IpfsHash).finally((function(e){return e}));case 19:if("ACTION_REJECTED"!==(d=e.sent).code){e.next=24;break}return(0,p.Zk)(),t.target.classList.remove("inactive"),e.abrupt("return",f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{formdata:[{id:"createSingleBoxPreview",value:"",msg:"Transaction rejected!"}],substate:a.currsubState})})));case 24:if(console.log("minted----- ".concat(JSON.stringify(d))),!d.hash){e.next=27;break}return e.abrupt("return",m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{currsubState:"NFTminted"})})));case 27:t.target.classList.remove("inactive"),(0,p.Zk)();case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("label",{className:"popupBoxEleDetailsLabel",id:"createSingleBoxPreview",htmlFor:"createSingleAssetUpld",onClick:function(){document.querySelector("#single_asset").click()},children:(0,x.jsxs)("div",{className:"popupBoxEleDetails",style:{padding:null!==(t=a.data)&&void 0!==t&&t.path?"0px":"30px",boxSizing:"border-box"},children:[" ",(0,x.jsx)("img",{src:null!==(s=a.data)&&void 0!==s&&s.path?null===(l=a.data)||void 0===l?void 0:l.path:"uploadimg.svg",style:{objectFit:"cover",height:"100%",width:"100%"},alt:""})," "]})}),(0,x.jsx)("input",{type:"file",id:"single_asset",name:"single_asset",accept:"image/*,video/*,audio/*,webgl/*,.glb,.gltf",style:{opacity:100,zIndex:1},onChange:g,hidden:!0}),(0,x.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(o=a.data)&&void 0!==o&&o.name?null===(v=a.data)||void 0===v?void 0:v.name:"Name",type:"text",name:"name",id:"singleNFTName",onChange:b,onClick:function(e){return e.target.value=a.data.name?a.data.name:""},style:{opacity:100,zIndex:1}}),(0,x.jsx)(d.Xj,{data:{typeId:"singleNFTDesc",typeClass:"popupBoxTextAreaEle",name:"desc",placeholder:null!==(h=a.data)&&void 0!==h&&h.description?null===(y=a.data)||void 0===y?void 0:y.description:"Description",type:"textarea",onChange:b}}),(0,x.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(k=a.data)&&void 0!==k&&k.collection?null===(Z=a.data)||void 0===Z?void 0:Z.collection:"Collection",type:"text",name:"collection",id:"singleNFTColl",onChange:b,style:{opacity:100,zIndex:1}}),(0,x.jsxs)("div",{style:{flexDirection:"row",maxWidth:"600px",width:"100%",margin:"0px auto"},children:[(0,x.jsx)("input",{className:"popupBoxSmallTextAreaLeftEle",placeholder:null!==(S=a.data)&&void 0!==S&&S.price?null===(N=a.data)||void 0===N?void 0:N.price:"Price",type:"number",name:"price",id:"singleNFTPrice",onChange:b,style:{opacity:100,zIndex:1}}),(0,x.jsx)("input",{className:"popupBoxSmallTextAreaRightEle",placeholder:null!==(j=a.data)&&void 0!==j&&j.royalties?null===(C=a.data)||void 0===C?void 0:C.royalties:"Royalties: max 50%",type:"number",name:"royalties",id:"singleNFTRoyalty",onChange:b,style:{opacity:100,zIndex:1}})]}),(0,x.jsx)(d.BZ,{data:{class:"popupBoxEle",id:"createBox",value:"create",func:T}})]})}return(0,x.jsx)("div",{className:"popupdark",children:(0,x.jsxs)("div",{className:"popupBox",children:[(0,x.jsx)("button",{className:"closeBoxWhite",onClick:function(){return m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{state:"home",data:{coll_name:null,coll_symbol:null,layers:[]},currsubState:null})}))},children:"X"}),(0,x.jsx)(h,{})]})})}}}]);
//# sourceMappingURL=716.f4d0d495.chunk.js.map