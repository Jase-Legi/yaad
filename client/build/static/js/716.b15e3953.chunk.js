"use strict";(self.webpackChunkyaad=self.webpackChunkyaad||[]).push([[716],{716:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var l=t(2791),s=t(8329),n=t(8188),i=t(7584),o=t(1065),d=t(1449),r=t(6931),c=(t(4363),t(6505),t(4880)),p=t(4684),u=t(184);const m=function(e){const{state:a,setState:t}=(0,l.useContext)(s.s),{msgStacks:m,setMsgStacks:g}=(0,l.useContext)(n.G),v=async e=>{if((0,p.QP)(e),0===e.target.files.length)return g((e=>({...e,messages:["No file selected!"]}))),(0,p.Zk)();const a=e.target.files[0];(0,d.m)(a,(a=>{let[l,s]=a;return s.toLowerCase().match(/(png|jpg|jpeg|gif|mp3|mp4|svg|mov|webp|webm|mpg|avi|ogg|wmv|bmp|tiff)$/)?(console.log(`file extension: ${s}`),t((e=>({...e,data:{...e.data,path:l,ext:s}}))),(0,p.Zk)(e)):(l=null,g((e=>({...e,messages:["File type not allowed!, \nSupported file types: png, jpg, jpeg, gif, mp3, mp4, svg, mov, webp, webm, mpg, avi, ogg, wmv, bmp, tiff."]}))),(0,p.Zk)(e))}))},h=async e=>{const t=e.target,l=t.value;if(""!==l)switch(e.target.getAttribute("name")){case"name":a.data.name=(0,r.SA)(l,0,50)&&(0,r.sg)(l,[".","_"," "])?l:a.data.name,t.value=a.data.name;break;case"collection":a.data.collection=(0,r.SA)(l,0,50)&&(0,r.sg)(l,[".","_"," "])?l:a.data.collection,t.value=a.data.collection;break;case"price":a.data.price=(0,r.kE)(l)?l:a.data.price,t.value=a.data.price;break;case"royalties":a.data.royalties=(0,r.kE)(l)?l:a.data.royalties,t.value=a.data.royalties;break;case"desc":a.data.description=(0,r.SA)(l,0,200)?l:a.data.description,t.value=a.data.description}},y=async e=>{var l,s,n,d,c;(0,p.QP)(e),e.preventDefault();let u=[];var m,v,h;(null!==(l=a.data)&&void 0!==l&&l.path||u.push("Upload an NFT file!"),null!==(s=a.data)&&void 0!==s&&s.name&&(0,r.SA)(null===(n=a.data)||void 0===n?void 0:n.name,3,50)&&(0,r.sg)(null===(d=a.data)||void 0===d?void 0:d.name,[".","_",[" "]])||u.push("Name must be at least 3 characters long & only letters numbers, spaces, periods, and undescores allowed!"),null!==(c=a.data)&&void 0!==c&&c.description)&&(""!==(null===(m=a.data)||void 0===m?void 0:m.description)&&(0,r.SA)(null===(v=a.data)||void 0===v?void 0:v.description,20,200)||u.push("Description must be at least 20 characters long!"));a.data.collection&&((0,r.SA)(null===(h=a.data)||void 0===h?void 0:h.collection,4,50)||u.push("Collection name must be at least 4 characters long!"));const y=await(0,o.SY)();if(y.code&&u.push(y.code),u.length>0)return g((e=>({...e,messages:u,substate:a.currsubState}))),(0,p.Zk)(e);console.log(y);const x={pinataMetadata:{name:`${a.data.name}`,keyvalues:{description:"nft generated by Yaad labs.",name:`${a.data.name}`}},pinataOptions:{cidVersion:0}},f=await(0,i.Jr)(a.data.path);let b=y+"__"+Date.now()+".",S=new FormData;S.append("img",f,b),S.append("the_options",JSON.stringify(x));await fetch(a.baseServerUri+"pinnit",{method:"POST"});let w=new FormData;w.append("data",JSON.stringify(a.data));const k=await fetch(a.baseServerUri+"createone",{method:"POST",body:w}).then((e=>e.json())).then((e=>e));if(k.error){if("duplicate"===k.error.message)return(0,p.Zk)(),g((e=>({...e,formdata:[{id:"createSingleBoxPreview",value:"",msg:"This NFT already exists, please select an original design."}],substate:a.currsubState})));(0,p.Zk)(),t((e=>({...e,currsubState:"SingleNFTDetailsForm"})))}if(k.results){const l=await(0,o.VV)(k.results.IpfsHash).finally((e=>e));if("ACTION_REJECTED"===l.code)return(0,p.Zk)(),e.target.classList.remove("inactive"),g((e=>({...e,formdata:[{id:"createSingleBoxPreview",value:"",msg:"Transaction rejected!"}],substate:a.currsubState})));if(console.log(`minted----- ${JSON.stringify(l)}`),l.hash)return t((e=>({...e,currsubState:"NFTminted"})));e.target.classList.remove("inactive"),(0,p.Zk)()}};function x(e){var t,l,s,n,i,o,d,r,p,m;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{type:"file",id:"single_asset",name:"single_asset",style:{opacity:100,zIndex:1},onChange:v,hidden:!0}),(0,u.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(t=a.data)&&void 0!==t&&t.name?null===(l=a.data)||void 0===l?void 0:l.name:"Name",type:"text",name:"name",id:"singleNFTName",onChange:h,onClick:e=>e.target.value=a.data.name?a.data.name:"",style:{opacity:100,zIndex:1}}),(0,u.jsx)(c.Xj,{data:{typeId:"singleNFTDesc",typeClass:"popupBoxTextAreaEle",name:"desc",placeholder:null!==(s=a.data)&&void 0!==s&&s.description?null===(n=a.data)||void 0===n?void 0:n.description:"Job Title",type:"textarea",onChange:h}}),(0,u.jsx)("input",{className:"popupBoxTextEle",placeholder:null!==(i=a.data)&&void 0!==i&&i.collection?null===(o=a.data)||void 0===o?void 0:o.collection:"Sill Level Required",type:"text",name:"collection",id:"singleNFTColl",onChange:h,style:{opacity:100,zIndex:1}}),(0,u.jsxs)("div",{style:{flexDirection:"row",maxWidth:"600px",width:"100%",margin:"0px auto"},children:[(0,u.jsx)("input",{className:"popupBoxSmallTextAreaLeftEle",placeholder:null!==(d=a.data)&&void 0!==d&&d.price?null===(r=a.data)||void 0===r?void 0:r.price:"Hourly Rate",type:"number",name:"price",id:"singleNFTPrice",onChange:h,style:{opacity:100,zIndex:1}}),(0,u.jsx)("input",{className:"popupBoxSmallTextAreaRightEle",placeholder:null!==(p=a.data)&&void 0!==p&&p.royalties?null===(m=a.data)||void 0===m?void 0:m.royalties:"Time",type:"number",name:"royalties",id:"singleNFTRoyalty",onChange:h,style:{opacity:100,zIndex:1}})]}),(0,u.jsx)(c.BZ,{data:{class:"popupBoxEle",id:"createBox",value:"create",func:y}})]})}return(0,u.jsxs)("div",{className:"popupBox",children:[(0,u.jsx)("button",{className:"closeBoxWhite",onClick:()=>t((e=>({...e,state:"home",data:{coll_name:null,coll_symbol:null,layers:[]},currsubState:null}))),children:"X"}),(0,u.jsx)(x,{})]})}}}]);
//# sourceMappingURL=716.b15e3953.chunk.js.map